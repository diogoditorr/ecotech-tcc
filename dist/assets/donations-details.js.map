{"version":3,"file":"donations-details.js","sources":["../../public/scripts/donations-details.ts"],"sourcesContent":["import utils from \"./utils\";\n\nconst saveButton = document.querySelector(\n    \"#page-donations-details .buttons .save\"\n) as HTMLButtonElement;\nconst cancelButton = document.querySelector(\n    \"#page-donations-details .buttons .cancel-order\"\n) as HTMLButtonElement;\nconst orderId = document.querySelector(\n    \"#page-donations-details input[name='orderId']\"\n) as HTMLInputElement;\nconst select = document.querySelector(\n    \"#page-donations-details select[id='status']\"\n) as HTMLSelectElement;\n\nsaveButton.addEventListener(\"click\", () => {\n    disableSaveButton();\n\n    fetch(\"../../src/php/order-edit.php\", {\n        method: \"POST\",\n        body: utils.toFormData({\n            orderId: orderId.value,\n            status: utils.handleStatus(\n                select.options[select.selectedIndex].value\n            ),\n        }),\n    })\n        .then((response) => response.json())\n        .then((data) => {\n            enableSaveButton();\n\n            console.log(data);\n            alert(\"Status changed with success!\");\n        })\n        .catch((error) => {\n            console.error(error);\n            alert(\"Something went wrong. Please try again later.\");\n        });\n});\n\ncancelButton.addEventListener(\"click\", () => {\n    fetch(\"../../src/php/order-cancel.php\", {\n        method: \"POST\",\n        body: utils.toFormData({\n            orderId: orderId.value,\n        }),\n    })\n        .then((response) => response.json())\n        .then((data) => {\n            console.log(data);\n            if (data.success) {\n                alert(\"Order canceled with success!\");\n                window.location.href = \"./donations.php\";\n            } else {\n                throw new Error();\n            }\n        })\n        .catch((error) => {\n            console.error(error);\n            alert(\"Something went wrong. Please try again later.\");\n        });\n});\n\nfunction enableSaveButton() {\n    saveButton.classList.remove(\"disabled\");\n    saveButton.disabled = false;\n}\n\nfunction disableSaveButton() {\n    saveButton.classList.add(\"disabled\");\n    saveButton.disabled = true;\n}\n"],"names":[],"mappings":"+BAEA,KAAM,GAAa,SAAS,cACxB,0CAEE,EAAe,SAAS,cAC1B,kDAEE,EAAU,SAAS,cACrB,iDAEE,EAAS,SAAS,cACpB,+CAGJ,EAAW,iBAAiB,QAAS,IAAM,WAGjC,+BAAgC,CAClC,OAAQ,OACR,KAAM,EAAM,WAAW,CACnB,QAAS,EAAQ,MACjB,OAAQ,EAAM,aACV,EAAO,QAAQ,EAAO,eAAe,WAI5C,KAAK,AAAC,GAAa,EAAS,QAC5B,KAAK,AAAC,GAAS,aAGJ,IAAI,SACN,kCAET,MAAM,AAAC,GAAU,SACN,MAAM,SACR,qDAIlB,EAAa,iBAAiB,QAAS,IAAM,OACnC,iCAAkC,CACpC,OAAQ,OACR,KAAM,EAAM,WAAW,CACnB,QAAS,EAAQ,UAGpB,KAAK,AAAC,GAAa,EAAS,QAC5B,KAAK,AAAC,GAAS,YACJ,IAAI,GACR,EAAK,cACC,uCACC,SAAS,KAAO,4BAEjB,IAAI,SAGjB,MAAM,AAAC,GAAU,SACN,MAAM,SACR,qDAIlB,YAA4B,GACb,UAAU,OAAO,cACjB,SAAW,GAG1B,YAA6B,GACd,UAAU,IAAI,cACd,SAAW"}